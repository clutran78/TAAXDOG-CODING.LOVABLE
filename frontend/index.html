<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAAXDOG - Dashboard</title>
    <!-- Add these lines to ensure Bootstrap JS is properly loaded -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/your-fontawesome-kit.js" crossorigin="anonymous"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chart.js for Data Visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Top Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-wallet"></i> TaaxDog
            </a>
            <div class="d-flex">
                <button class="connect-bank-btn" id="connect-bank-button">
                    Connect Bank
                </button>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="data-dashboard-nav-link">
                                <i class="fas fa-chart-bar text-primary"></i> Data Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="net-income-nav-link">
                                <i class="fas fa-money-bill-wave text-success"></i> Net Income
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="total-expenses-nav-link">
                                <i class="fas fa-arrow-circle-down text-danger"></i> Total Expenses
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="net-balance-nav-link">
                                <i class="fas fa-balance-scale text-primary"></i> Net Balance
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="subscriptions-nav-link">
                                <i class="fas fa-repeat text-primary"></i> Subscriptions
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="bank-accounts-nav-link">
                                <i class="fas fa-university text-success"></i> Bank Accounts
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="goals-nav-link">
                                <i class="fas fa-bullseye me-2"></i> Goals
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="tax-profile-nav-link">
                                <i class="fas fa-file-invoice-dollar me-2"></i> Your Tax Profile
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-shield-alt me-2"></i> Security
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="receipts-nav-link">
                                <i class="fas fa-receipt text-success"></i> Receipts
                            </a>
                        </li>
                        <!-- Add the financial insights tab to the sidebar navigation -->
                        <a class="nav-link" id="financial-insights-tab" data-bs-toggle="pill" href="#financial-insights"
                            role="tab">
                            <i class="fas fa-robot"></i>
                            AI Insights
                        </a>
                    </ul>

                    <!-- Logout button at bottom of sidebar -->
                    <div class="logout-button mt-auto">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center" href="#" id="logout-button">
                                    <i class="fas fa-sign-out-alt text-danger me-2"></i>
                                    <span>Log Out</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
                <div class="row mt-5">
                    <!-- First Row - Stats Cards -->
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card" id="net-income-card" data-card="net-income"
                            style="cursor: pointer;">
                            <div class="card-header">
                                Net Income
                                <i class="fas fa-arrow-circle-up income-icon"></i>
                            </div>
                            <div class="card-body">
                                <div class="stat-value" id="net-income-value">$0.00</div>
                                <div class="stat-change positive-change">
                                    <i class="fas fa-arrow-up"></i> +12.3% from last month
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card" id="total-expenses-card" data-card="total-expenses"
                            style="cursor: pointer;">
                            <div class="card-header">
                                Total Expenses
                                <i class="fas fa-arrow-circle-down expense-icon"></i>
                            </div>
                            <div class="card-body">
                                <div class="stat-value" id="total-expenses-value">$0.00</div>
                                <div class="stat-change negative-change">
                                    <i class="fas fa-arrow-down"></i> -8.1% from last month
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card" id="net-balance-card" data-card="net-balance"
                            style="cursor: pointer;">
                            <div class="card-header">
                                Net Balance
                                <i class="fas fa-balance-scale balance-icon"></i>
                            </div>
                            <div class="card-body">
                                <div class="stat-value" id="net-balance-value">$0.00</div>
                                <div class="stat-change positive-change">
                                    <i class="fas fa-arrow-up"></i> +15.2% from last month
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card" id="subscriptions-card" data-card="subscriptions"
                            style="cursor: pointer;">
                            <div class="card-header">
                                Subscriptions
                                <i class="fas fa-repeat subscription-icon"></i>
                            </div>
                            <div class="card-body">
                                <div class="stat-value">$<span id="total-subscriptions-value">0.00</span></div>
                                <div class="stat-change neutral-change">
                                    <span id="subscription-count">0</span> active subscriptions
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Second Row - Goals, Notifications, and Bank Accounts -->
                <div class="row mt-3">
                    <!-- Left Side - Goals -->
                    <div class="col-md-6">
                        <!-- Goals Card -->
                        <div class="card tile-card h-100" data-tile-type="goals" id="goals-card"
                            style="cursor: pointer;">
                            <div class="card-header">
                                Goals Progress
                                <i class="fas fa-bullseye text-warning"></i>
                            </div>
                            <div class="card-body">
                                <div class="scrollable-content">
                                    <h3>3 Active Goals</h3>
                                    <div class="stat-change positive-change mb-4">
                                        <i class="fas fa-check-circle"></i> 60% Complete from last month
                                    </div>

                                    <!-- Emergency Fund Goal -->
                                    <div class="goal-item">
                                        <div class="goal-details">
                                            <span>Emergency Fund</span>
                                            <span class="text-success">$5000.00</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 50%"
                                                aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <small>$5000.00 of $10000.00</small>
                                            <small>Due: 30/06/2024</small>
                                        </div>
                                    </div>

                                    <!-- New Car Goal -->
                                    <div class="goal-item">
                                        <div class="goal-details">
                                            <span>New Car</span>
                                            <span class="text-success">$2500.00</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 16.7%"
                                                aria-valuenow="16.7" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <small>$2500.00 of $15000.00</small>
                                            <small>Due: 31/12/2024</small>
                                        </div>
                                    </div>

                                    <!-- Holiday Goal -->
                                    <div class="goal-item">
                                        <div class="goal-details">
                                            <span>Holiday</span>
                                            <span class="text-success">$1200.00</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 40%"
                                                aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <small>$1200.00 of $3000.00</small>
                                            <small>Due: 15/09/2024</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Side - Bank Accounts and Notifications -->
                    <div class="col-md-6">
                        <!-- Bank Accounts Card -->
                        <div class="card tile-card mb-3" data-tile-type="bank-accounts"
                            style="height: calc(50% - 10px);">
                            <div class="card-header">
                                Bank Accounts
                                <i class="fas fa-university text-primary"></i>
                            </div>
                            <div class="card-body">
                                <div class="scrollable-content">
                                    <div id="bank-connections-container">
                                        <!-- Bank connections will be loaded here -->
                                        <div class="text-center py-4" id="no-connections-message">
                                            <i class="fas fa-university fa-3x mb-3 text-muted"></i>
                                            <p>No bank accounts connected yet. Click the "Connect Bank" button in the
                                                top-right corner to get started.</p>
                                        </div>
                                        <div id="dashboard-connections-list" style="display: none;">
                                            <!-- Bank connections will be loaded here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notifications Card -->
                        <div class="card tile-card" data-tile-type="notifications" style="height: calc(50% - 10px);">
                            <div class="card-header">
                                Notifications
                                <i class="fas fa-bell text-warning"></i>
                            </div>
                            <div class="card-body">
                                <div class="scrollable-content">
                                    <h3>2 New Updates</h3>

                                    <!-- Notifications List -->
                                    <div class="notification-item">
                                        <h5>Tax Return Due</h5>
                                        <p>Your tax return is due in 2 weeks</p>
                                        <p class="notification-date">15/03/2024</p>
                                    </div>

                                    <div class="notification-item">
                                        <h5>Goal Milestone</h5>
                                        <p>Emergency Fund reached 75% of target</p>
                                        <p class="notification-date">10/03/2024</p>
                                    </div>
                                </div>

                                <!-- Clock Display -->
                                <div class="clock-display">
                                    <span id="hours">14</span>:<span id="minutes">31</span>
                                    <div class="d-flex justify-content-between">
                                        <small>min</small>
                                        <small>hour</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Third Row - Tax Profile Card -->
                <div class="row mt-3">
                    <div class="col-12">
                        <div class="card tile-card" data-tile-type="tax-profile" id="tax-profile-card"
                            style="cursor: pointer;">
                            <div class="card-header">
                                Your Tax Profile
                                <i class="fas fa-file-invoice-dollar text-primary"></i>
                            </div>
                            <div class="card-body">
                                <div class="scrollable-content">
                                    <div id="tax-profile-summary">
                                        <!-- Tax profile summary will be loaded here -->
                                        <div class="text-center py-4" id="no-tax-profile-message">
                                            <i class="fas fa-file-invoice-dollar fa-3x mb-3 text-muted"></i>
                                            <p>You haven't set up your tax profile yet. Click here to get started.</p>
                                        </div>
                                        <div id="tax-profile-summary-content" style="display: none;">
                                            <!-- Tax profile details will be loaded here -->
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6 class="text-muted mb-3">Personal Information</h6>
                                                    <p><strong>Name:</strong> <span id="summary-full-name">-</span></p>
                                                    <p><strong>TFN:</strong> <span id="summary-tfn">-</span></p>
                                                    <p><strong>Filing Status:</strong> <span
                                                            id="summary-filing-status">-</span></p>
                                                    <p><strong>Dependents:</strong> <span
                                                            id="summary-dependents">-</span></p>
                                                </div>
                                                <div class="col-md-6">
                                                    <h6 class="text-muted mb-3">Financial Summary</h6>
                                                    <p><strong>Income Sources:</strong> <span
                                                            id="summary-income-sources">-</span></p>
                                                    <p><strong>Deductions Claimed:</strong> <span
                                                            id="summary-deductions">-</span></p>
                                                    <p><strong>HECS/HELP Debt:</strong> <span id="summary-hecs">-</span>
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="text-center mt-3">
                                                <button class="btn btn-sm btn-outline-primary"
                                                    id="edit-tax-profile-btn">
                                                    <i class="fas fa-edit me-1"></i> View/Edit Tax Profile
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fourth Row - Receipts Section (initially hidden) -->
                <div class="row mt-3" id="receipts-section" style="display: none;">
                    <div class="col-12">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                                <h5 class="mb-0"><i class="fas fa-receipt text-primary me-2"></i>Receipts</h5>
                                <button class="btn btn-primary" id="receipt-upload-section-btn">
                                    <i class="fas fa-plus me-1"></i> Upload New Receipt
                                </button>
                            </div>
                            <div class="card-body">
                                <!-- Search and Filter Bar -->
                                <div class="row mb-4">
                                    <div class="col-md-4 mb-2 mb-md-0">
                                        <div class="input-group">
                                            <input type="text" class="form-control border-end-0" id="receipt-search"
                                                placeholder="Search merchant, items...">
                                            <button class="btn btn-outline-secondary border-start-0 bg-white"
                                                type="button" id="receipt-search-btn">
                                                <i class="fas fa-search text-muted"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-2 mb-md-0">
                                        <select class="form-select" id="receipt-category-filter">
                                            <option value="">All Categories</option>
                                            <option value="groceries">Groceries</option>
                                            <option value="dining">Dining & Restaurants</option>
                                            <option value="entertainment">Entertainment</option>
                                            <option value="transportation">Transportation</option>
                                            <option value="utilities">Utilities</option>
                                            <option value="housing">Housing & Rent</option>
                                            <option value="healthcare">Healthcare</option>
                                            <option value="education">Education</option>
                                            <option value="shopping">Shopping</option>
                                            <option value="travel">Travel</option>
                                            <option value="business">Business Expenses</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-2 mb-md-0">
                                        <select class="form-select" id="receipt-date-filter">
                                            <option value="all">All Time</option>
                                            <option value="today">Today</option>
                                            <option value="week">This Week</option>
                                            <option value="month">This Month</option>
                                            <option value="quarter">This Quarter</option>
                                            <option value="year">This Year</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-outline-secondary w-100" id="reset-filters-btn">
                                            <i class="fas fa-undo me-1"></i> Reset
                                        </button>
                                    </div>
                                </div>

                                <div id="no-receipts-message" style="display: none;" class="text-center p-5">
                                    <div class="mb-4">
                                        <i class="fas fa-receipt fa-4x text-secondary opacity-50"></i>
                                    </div>
                                    <h5 class="text-muted mb-3">No receipts found</h5>
                                    <p class="text-muted mb-4">Upload your first receipt to start tracking your expenses
                                    </p>
                                    <button class="btn btn-primary btn-lg" id="upload-first-receipt-btn">
                                        <i class="fas fa-plus me-2"></i> Upload Your First Receipt
                                    </button>
                                </div>

                                <div id="receipts-list" style="display: none;">
                                    <div class="table-responsive rounded">
                                        <table class="table table-hover align-middle">
                                            <thead class="table-light">
                                                <tr>
                                                    <th class="ps-3">Date</th>
                                                    <th>Merchant</th>
                                                    <th>Category</th>
                                                    <th>Amount</th>
                                                    <th>Status</th>
                                                    <th class="text-end pe-3">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="receipts-table-body">
                                                <!-- Receipts will be loaded here -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mt-3">
                                        <div>
                                            <span class="text-muted">Showing <span id="receipts-count">0</span>
                                                receipts</span>
                                        </div>
                                        <nav aria-label="Receipt pagination">
                                            <ul class="pagination pagination-sm" id="receipts-pagination">
                                                <!-- Pagination will be added here -->
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Receipt Statistics Card -->
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-white py-3">
                                <h5 class="mb-0"><i class="fas fa-chart-pie text-primary me-2"></i>Receipt Summary</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-3 mb-3 mb-md-0">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <h6 class="text-muted mb-2">Total Receipts</h6>
                                                <h3 id="total-receipts-count">0</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-3 mb-md-0">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <h6 class="text-muted mb-2">Total Spent</h6>
                                                <h3 id="total-receipts-amount">$0.00</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-3 mb-md-0">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <h6 class="text-muted mb-2">Matched Receipts</h6>
                                                <h3 id="matched-receipts-count">0</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <h6 class="text-muted mb-2">Average Amount</h6>
                                                <h3 id="average-receipt-amount">$0.00</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <input type="file" id="receipt-file-input" accept="image/*,.pdf" style="display: none;" />
                <div id="receipt-review-form" style="display:none; margin-top: 20px;">
                    <h5>Review Receipt Details</h5>
                    <form id="receiptForm">
                        <div class="mb-3">
                            <label for="vendor_name" class="form-label">Vendor Name</label>
                            <input type="text" class="form-control" id="vendor_name" name="vendor_name">
                        </div>
                        <div class="mb-3">
                            <label for="total_amount" class="form-label">Total Amount</label>
                            <input type="number" step="0.01" class="form-control" id="total_amount" name="total_amount">
                        </div>
                        <div class="mb-3">
                            <label for="date" class="form-label">Date</label>
                            <input type="date" class="form-control" id="date" name="date">
                        </div>
                        <div class="d-flex justify-content-between">
                            <button type="submit" class="btn btn-primary">Confirm and Save</button>
                            <button type="button" class="btn btn-secondary" id="cancel-review-btn">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="toast-container" class="position-fixed bottom-0 end-0 p-3" style="z-index: 1100;">
                    <div id="main-toast" class="toast align-items-center text-white bg-primary border-0" role="alert"
                        aria-live="assertive" aria-atomic="true">
                        <div class="d-flex">
                            <div class="toast-body" id="toast-body">
                                Message here...
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                                aria-label="Close"></button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <!-- Net Income Modal -->
    <div class="modal fade" id="net-income-modal" tabindex="-1" aria-labelledby="net-income-modal-label"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="net-income-modal-label">
                        <i class="fas fa-money-bill-wave text-success me-2"></i>Net Income Details
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h4 class="mb-0">Total Income</h4>
                                        <h3 class="text-success mb-0" id="modal-net-income-value">$0.00</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h5 class="mb-3">Income Sources</h5>
                    <div id="no-income-sources-message" class="alert alert-info" style="display: none;">
                        <i class="fas fa-info-circle me-2"></i>No income sources found. Connect your bank account to see
                        your income details.
                    </div>
                    <div id="income-sources-container">
                        <!-- Income sources will be loaded here dynamically -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Expense Categories Modal -->
    <div class="modal fade" id="expense-categories-modal" tabindex="-1" aria-labelledby="expense-categories-modal-label"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="expense-categories-modal-label">
                        <i class="fas fa-chart-pie text-danger me-2"></i>Expense Categories
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center p-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3">Loading expense data...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="view-all-expenses-btn">
                        <i class="fas fa-list-ul me-2"></i>View All Expenses
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Detailed Expenses Modal -->
    <div class="modal fade" id="detailed-expenses-modal" tabindex="-1" aria-labelledby="detailed-expenses-modal-label"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="detailed-expenses-modal-label">
                        <i class="fas fa-receipt text-danger me-2"></i>Detailed Expenses
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h4 class="mb-0">Total Expenses</h4>
                                        <h3 class="text-danger mb-0" id="modal-detailed-expenses-value">$0.00</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group">
                                <input type="text" class="form-control" id="expense-search"
                                    placeholder="Search expenses...">
                                <button class="btn btn-primary" type="button" id="expense-search-btn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="no-expenses-message" class="alert alert-info d-none">
                        <i class="fas fa-info-circle me-2"></i>No expenses found. Connect your bank account to see your
                        expenses.
                    </div>

                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Description</th>
                                    <th>Merchant</th>
                                    <th>Category</th>
                                    <th>Account</th>
                                    <th class="text-end">Amount</th>
                                </tr>
                            </thead>
                            <tbody id="expenses-table-body">
                                <!-- Expense rows will be loaded here dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="view-expense-categories-btn">
                        <i class="fas fa-chart-pie me-2"></i>View Expense Categories
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Net Balance Modal -->
    <div class="modal fade" id="net-balance-modal" tabindex="-1" aria-labelledby="net-balance-modal-label"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="net-balance-modal-label">
                        <i class="fas fa-balance-scale text-primary me-2"></i>Net Balance Details
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h4 class="mb-0">Net Balance</h4>
                                        <h3 class="mb-0" id="modal-net-balance-value">$0.00</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header bg-success bg-opacity-10 text-success">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">Total Income</h5>
                                        <i class="fas fa-arrow-circle-up"></i>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <h3 class="text-success" id="modal-balance-income-value">$0.00</h3>
                                    <div class="mt-3">
                                        <h6>Top Income Sources:</h6>
                                        <div id="balance-income-sources">
                                            <!-- Income sources will be loaded here -->
                                        </div>
                                        <div class="mt-3">
                                            <button class="btn btn-outline-success btn-sm"
                                                id="view-all-income-from-balance-btn">
                                                <i class="fas fa-list me-1"></i> View All Income
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header bg-danger bg-opacity-10 text-danger">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">Total Expenses</h5>
                                        <i class="fas fa-arrow-circle-down"></i>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <h3 class="text-danger" id="modal-balance-expenses-value">$0.00</h3>
                                    <div class="mt-3">
                                        <h6>Top Expense Categories:</h6>
                                        <div id="balance-expense-categories">
                                            <!-- Expense categories will be loaded here -->
                                        </div>
                                        <div class="mt-3">
                                            <button class="btn btn-outline-danger btn-sm"
                                                id="view-all-expenses-from-balance-btn">
                                                <i class="fas fa-list me-1"></i> View All Expenses
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Monthly Trends Section -->
                    <div class="row mt-2">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="fas fa-chart-line me-2"></i>Monthly Balance Trend
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="text-center py-3">
                                        <i class="fas fa-chart-line fa-3x text-primary mb-3"></i>
                                        <p>Balance trend visualization would appear here</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="analyze-balance-btn">
                        <i class="fas fa-search me-1"></i>Analyze Balance
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add after the Net Balance Modal -->
    <!-- Subscriptions Modal -->
    <div class="modal fade" id="subscriptions-modal" tabindex="-1" aria-labelledby="subscriptions-modal-label"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="subscriptions-modal-label">
                        <i class="fas fa-repeat text-primary me-2"></i>Manage Subscriptions
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h4 class="mb-0">Total Monthly Cost</h4>
                                        <h3 class="text-primary mb-0" id="modal-total-subscriptions-value">$0.00</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="mb-0">Active Subscriptions</h5>
                        <button class="btn btn-primary btn-sm" id="add-subscription-btn">
                            <i class="fas fa-plus me-1"></i> Add Subscription
                        </button>
                    </div>

                    <div id="no-subscriptions-message" class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>No subscriptions found. Add your first subscription or
                        connect your bank to automatically detect them.
                    </div>

                    <div id="subscriptions-container">
                        <!-- Subscriptions will be loaded here -->
                    </div>

                    <!-- Add Subscription Form (initially hidden) -->
                    <div id="add-subscription-form" class="card mt-4" style="display: none;">
                        <div class="card-header bg-light">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Add New Subscription</h5>
                                <button type="button" class="btn-close" id="close-subscription-form"></button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="subscription-form">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="subscription-name" class="form-label">Service Name</label>
                                        <input type="text" class="form-control" id="subscription-name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="subscription-amount" class="form-label">Monthly Amount</label>
                                        <div class="input-group">
                                            <span class="input-group-text">$</span>
                                            <input type="number" class="form-control" id="subscription-amount"
                                                min="0.01" step="0.01" required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="subscription-category" class="form-label">Category</label>
                                        <select class="form-select" id="subscription-category" required>
                                            <option value="">Select a category</option>
                                            <option value="Entertainment">Entertainment</option>
                                            <option value="Software">Software</option>
                                            <option value="Streaming">Streaming</option>
                                            <option value="Utilities">Utilities</option>
                                            <option value="Shopping">Shopping</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="subscription-frequency" class="form-label">Billing Frequency</label>
                                        <select class="form-select" id="subscription-frequency" required>
                                            <option value="monthly">Monthly</option>
                                            <option value="yearly">Yearly</option>
                                            <option value="quarterly">Quarterly</option>
                                            <option value="weekly">Weekly</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="subscription-start-date" class="form-label">Start Date</label>
                                        <input type="date" class="form-control" id="subscription-start-date" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="subscription-next-payment" class="form-label">Next Payment
                                            Date</label>
                                        <input type="date" class="form-control" id="subscription-next-payment" required>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="subscription-notes" class="form-label">Notes (Optional)</label>
                                    <textarea class="form-control" id="subscription-notes" rows="2"></textarea>
                                </div>
                                <div class="text-end">
                                    <button type="button" class="btn btn-secondary me-2"
                                        id="cancel-subscription-btn">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save Subscription</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Auto-Detection Settings -->
                    <div class="card mt-4">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Auto-Detection Settings</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="auto-detect-subscriptions" checked>
                                <label class="form-check-label" for="auto-detect-subscriptions">
                                    Automatically detect subscriptions from transactions
                                </label>
                            </div>
                            <p class="text-muted small">
                                The app will analyze your transactions and automatically detect recurring payments that
                                might be subscriptions.
                                You can review and confirm these detections.
                            </p>
                            <div class="alert alert-light border">
                                <div class="d-flex">
                                    <div class="me-3">
                                        <i class="fas fa-lightbulb text-warning fa-2x"></i>
                                    </div>
                                    <div>
                                        <h6>How it works</h6>
                                        <p class="small mb-0">
                                            The app looks for recurring transactions with similar amounts from the same
                                            merchant.
                                            When a pattern is detected, it suggests adding them as subscriptions.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="scan-for-subscriptions-btn">
                        <i class="fas fa-search me-1"></i>Scan for Subscriptions
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!--- file upload start -->
    <div class="modal fade" id="receipt-upload-section" tabindex="-1" aria-labelledby="receipt-upload-section-label"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="card mt-3">
                        <div class="card-header bg-light">
                            <h5 class="mb-0"><i class="fas fa-file-upload text-primary me-2"></i>Upload Receipt</h5>
                        </div>
                        <div class="card-body">
                            <!-- Tab Navigation -->
                            <ul class="nav nav-tabs" id="uploadTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="local-tab" data-bs-toggle="tab"
                                        data-bs-target="#local" type="button" role="tab">From Device</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="url-tab" data-bs-toggle="tab" data-bs-target="#url"
                                        type="button" role="tab">From URL</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="camera-tab" data-bs-toggle="tab"
                                        data-bs-target="#camera" type="button" role="tab">Take Photo</button>
                                </li>
                            </ul>

                            <!-- Tab Content -->
                            <div class="tab-content mt-3" id="uploadTabContent">
                                <!-- Local Upload -->
                                <div class="tab-pane fade show active" id="local" role="tabpanel">
                                    <div class="mb-3">
                                        <label for="receipt-file" class="form-label">Upload from your device</label>
                                        <input class="form-control" type="file" id="receipt-file"
                                            accept="image/*,application/pdf">
                                    </div>
                                </div>

                                <!-- URL Upload -->
                                <div class="tab-pane fade" id="url" role="tabpanel">
                                    <div class="mb-3">
                                        <label for="receipt-url" class="form-label">Paste a receipt URL</label>
                                        <input class="form-control" type="url" id="receipt-url"
                                            placeholder="https://example.com/receipt.jpg">
                                    </div>
                                </div>

                                <!-- Camera Upload -->
                                <div class="tab-pane fade" id="camera" role="tabpanel">
                                    <div class="mb-3">
                                        <label class="form-label">Take a photo of your receipt</label>
                                        <div class="d-flex flex-column">
                                            <video id="camera-stream" width="100%" height="240" autoplay playsinline
                                                class="mb-2" style="border: 1px solid #ccc;"></video>
                                            <button type="button" class="btn btn-outline-primary btn-sm mb-2"
                                                id="capture-photo-btn">Capture Photo</button>
                                            <canvas id="photo-canvas" width="640" height="480"
                                                style="display: none;"></canvas>
                                            <img id="photo-preview" class="img-thumbnail mt-2" style="display: none;" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="text-end">
                                <button type="submit" class="btn btn-success">Submit Receipt</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!--- file upload end -->

    <!-- Data Dashboard Section -->
    <div id="data-dashboard-section" style="display: none; margin-left: 240px; padding: 72px 20px 20px 20px;">
        <div class="container-fluid">
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Financial Overview</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="mb-3">Expenses by Category</h6>
                                    <div style="height: 300px;">
                                        <canvas id="categoryChart"></canvas>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="mb-3">Income vs Expenses Over Time</h6>
                                    <div style="height: 300px;">
                                        <canvas id="timeChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Transaction History</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Merchant</th>
                                            <th>Category</th>
                                            <th>Amount</th>
                                            <th>Type</th>
                                        </tr>
                                    </thead>
                                    <tbody id="transactionsTableBody">
                                        <!-- Transactions will be loaded here dynamically -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript libraries and scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="app.js"></script>

    <!-- Tax Profile Modal -->
    <div class="modal fade" id="tax-profile-modal" tabindex="-1" aria-labelledby="tax-profile-modal-label"
        aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="tax-profile-modal-label">
                        <i class="fas fa-file-invoice-dollar me-2"></i> Your Tax Profile
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i> Complete your tax profile to help our AI identify
                        potential tax deductions and optimize your financial planning.
                    </div>

                    <!-- Tax Profile Form -->
                    <form id="tax-profile-form" class="needs-validation" novalidate>
                        <!-- Nav tabs for sections -->
                        <ul class="nav nav-tabs mb-4" id="taxProfileTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="personal-tab" data-bs-toggle="tab"
                                    data-bs-target="#personal-content" type="button" role="tab">Personal
                                    Information</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="income-tab" data-bs-toggle="tab"
                                    data-bs-target="#income-content" type="button" role="tab">Income</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="deductions-tab" data-bs-toggle="tab"
                                    data-bs-target="#deductions-content" type="button" role="tab">Deductions</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="offsets-tab" data-bs-toggle="tab"
                                    data-bs-target="#offsets-content" type="button" role="tab">Tax Offsets</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="medicare-tab" data-bs-toggle="tab"
                                    data-bs-target="#medicare-content" type="button" role="tab">Medicare</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="hecs-tab" data-bs-toggle="tab"
                                    data-bs-target="#hecs-content" type="button" role="tab">HELP/HECS</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="additional-tab" data-bs-toggle="tab"
                                    data-bs-target="#additional-content" type="button" role="tab">Additional
                                    Info</button>
                            </li>
                        </ul>

                        <!-- Tab content -->
                        <div class="tab-content" id="taxProfileTabsContent">
                            <!-- Personal Information Tab -->
                            <div class="tab-pane fade show active" id="personal-content" role="tabpanel">
                                <h4 class="mb-3">Basic Identification</h4>
                                <div class="row g-3">
                                    <div class="col-md-2">
                                        <label for="title" class="form-label">Title</label>
                                        <select class="form-select" id="title" required>
                                            <option value="">Choose...</option>
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Miss">Miss</option>
                                            <option value="Ms">Ms</option>
                                            <option value="Dr">Dr</option>
                                        </select>
                                        <div class="invalid-feedback">Please select a title.</div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="family-name" class="form-label">Family Name/Surname</label>
                                        <input type="text" class="form-control" id="family-name" maxlength="40"
                                            required>
                                        <div class="invalid-feedback">Please enter your family name.</div>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="first-given-name" class="form-label">First Given Name</label>
                                        <input type="text" class="form-control" id="first-given-name" maxlength="40"
                                            required>
                                        <div class="invalid-feedback">Please enter your first name.</div>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="other-given-names" class="form-label">Other Given Names</label>
                                        <input type="text" class="form-control" id="other-given-names" maxlength="40">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="previous-names" class="form-label">Previous Names (if
                                            applicable)</label>
                                        <input type="text" class="form-control" id="previous-names">
                                        <small class="text-muted">Maiden, former married names, etc.</small>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="date-of-birth" class="form-label">Date of Birth</label>
                                        <input type="date" class="form-control" id="date-of-birth" required>
                                        <div class="invalid-feedback">Please enter your date of birth.</div>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="tfn" class="form-label">Tax File Number (TFN)</label>
                                        <input type="text" class="form-control" id="tfn" pattern="[0-9]{9}" required>
                                        <div class="invalid-feedback">Please enter a valid 9-digit TFN.</div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="abn" class="form-label">ABN (if applicable)</label>
                                        <input type="text" class="form-control" id="abn" pattern="[0-9]{11}">
                                    </div>
                                </div>

                                <h4 class="mb-3 mt-4">Contact Details</h4>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="residential-address" class="form-label">Residential Address</label>
                                        <input type="text" class="form-control" id="residential-address" required>
                                        <div class="invalid-feedback">Please enter your residential address.</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="postal-address" class="form-label">Postal Address</label>
                                        <input type="text" class="form-control" id="postal-address">
                                        <small class="text-muted">If different from residential address</small>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="email" class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="email" required>
                                        <div class="invalid-feedback">Please enter a valid email address.</div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="mobile" class="form-label">Mobile Phone Number</label>
                                        <input type="tel" class="form-control" id="mobile" pattern="[0-9]{10}" required>
                                        <div class="invalid-feedback">Please enter a valid 10-digit mobile number.</div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="alternative-phone" class="form-label">Alternative Phone
                                            Number</label>
                                        <input type="tel" class="form-control" id="alternative-phone">
                                    </div>
                                </div>

                                <h4 class="mb-3 mt-4">Filing Status</h4>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label class="form-label">Australian Resident for Tax Purposes?</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="residency-status"
                                                    id="resident-yes" value="yes" required>
                                                <label class="form-check-label" for="resident-yes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="residency-status"
                                                    id="resident-no" value="no">
                                                <label class="form-check-label" for="resident-no">No</label>
                                            </div>
                                            <div class="invalid-feedback">Please select your residency status.</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Claiming Tax-Free Threshold?</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax-free-threshold"
                                                    id="threshold-yes" value="yes" required>
                                                <label class="form-check-label" for="threshold-yes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax-free-threshold"
                                                    id="threshold-no" value="no">
                                                <label class="form-check-label" for="threshold-no">No</label>
                                            </div>
                                            <div class="invalid-feedback">Please select your tax-free threshold status.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="has-spouse">
                                            <label class="form-check-label" for="has-spouse">
                                                I have a spouse during this tax year
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div id="spouse-details" class="row g-3 mt-2" style="display: none;">
                                    <div class="col-md-4">
                                        <label for="spouse-name" class="form-label">Spouse's Full Name</label>
                                        <input type="text" class="form-control" id="spouse-name">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="spouse-tfn" class="form-label">Spouse's TFN</label>
                                        <input type="text" class="form-control" id="spouse-tfn" pattern="[0-9]{9}">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="spouse-income" class="form-label">Spouse's Taxable Income</label>
                                        <input type="number" class="form-control" id="spouse-income" min="0"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Spouse for Full or Partial Year?</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="spouse-period"
                                                    id="spouse-full" value="full">
                                                <label class="form-check-label" for="spouse-full">Full Year</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="spouse-period"
                                                    id="spouse-partial" value="partial">
                                                <label class="form-check-label" for="spouse-partial">Partial
                                                    Year</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="has-dependents">
                                            <label class="form-check-label" for="has-dependents">
                                                I have dependent children
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div id="dependent-details" class="row g-3 mt-2" style="display: none;">
                                    <div class="col-md-12">
                                        <button type="button" class="btn btn-sm btn-outline-primary" id="add-dependent">
                                            <i class="fas fa-plus"></i> Add Dependent
                                        </button>
                                    </div>
                                    <div class="col-md-12" id="dependents-container">
                                        <!-- Dependent children will be added here -->
                                    </div>
                                </div>

                                <h4 class="mb-3 mt-4">Bank Account for Refunds</h4>
                                <div class="row g-3">
                                    <div class="col-md-3">
                                        <label for="bank-bsb" class="form-label">BSB</label>
                                        <input type="text" class="form-control" id="bank-bsb" pattern="[0-9]{6}"
                                            required>
                                        <div class="invalid-feedback">Please enter a valid BSB (6 digits).</div>
                                    </div>
                                    <div class="col-md-5">
                                        <label for="bank-account" class="form-label">Account Number</label>
                                        <input type="text" class="form-control" id="bank-account" pattern="[0-9]+"
                                            required>
                                        <div class="invalid-feedback">Please enter a valid account number.</div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="bank-name" class="form-label">Account Name</label>
                                        <input type="text" class="form-control" id="bank-name" required>
                                        <div class="invalid-feedback">Please enter the account name.</div>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <div></div>
                                    <button type="button" class="btn btn-primary"
                                        onclick="goToNextTab('personal-tab', 'income-tab')">Next: Income <i
                                            class="fas fa-arrow-right ms-2"></i></button>
                                </div>
                            </div>

                            <!-- Income Tab -->
                            <div class="tab-pane fade" id="income-content" role="tabpanel">
                                <h4 class="mb-3">Employment Income</h4>
                                <div class="row g-3 mb-3">
                                    <div class="col-md-12">
                                        <button type="button" class="btn btn-sm btn-outline-primary" id="add-employer">
                                            <i class="fas fa-plus"></i> Add Employer
                                        </button>
                                    </div>
                                    <div class="col-md-12" id="employers-container">
                                        <!-- Employer details will be added here -->
                                    </div>
                                </div>

                                <h4 class="mb-3 mt-4">Investment Income</h4>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="interest-income" class="form-label">Interest from Bank
                                            Accounts</label>
                                        <input type="number" class="form-control" id="interest-income" min="0"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="dividend-income" class="form-label">Dividends from
                                            Investments</label>
                                        <input type="number" class="form-control" id="dividend-income" min="0"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="trust-income" class="form-label">Trust Distributions</label>
                                        <input type="number" class="form-control" id="trust-income" min="0" step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="rental-income" class="form-label">Rental Property Income</label>
                                        <input type="number" class="form-control" id="rental-income" min="0"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="capital-gains" class="form-label">Capital Gains</label>
                                        <input type="number" class="form-control" id="capital-gains" min="0"
                                            step="0.01">
                                        <small class="text-muted">Including cryptocurrency</small>
                                    </div>
                                </div>

                                <h4 class="mb-3 mt-4">Government Payments</h4>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="govt-payment-type" class="form-label">Types of Pensions or
                                            Benefits</label>
                                        <input type="text" class="form-control" id="govt-payment-type">
                                    </div>
                                    <div class="col-md-3">
                                        <label for="govt-payment-amount" class="form-label">Amount Received</label>
                                        <input type="number" class="form-control" id="govt-payment-amount" min="0"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-3">
                                        <label for="govt-payment-tax" class="form-label">Tax Withheld</label>
                                        <input type="number" class="form-control" id="govt-payment-tax" min="0"
                                            step="0.01">
                                    </div>
                                </div>

                                <h4 class="mb-3 mt-4">Other Income</h4>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="foreign-income" class="form-label">Foreign Income</label>
                                        <input type="number" class="form-control" id="foreign-income" min="0"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="business-income" class="form-label">Business Income</label>
                                        <input type="number" class="form-control" id="business-income" min="0"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="super-income" class="form-label">Superannuation Income</label>
                                        <input type="number" class="form-control" id="super-income" min="0" step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="partnership-income" class="form-label">Income from Partnerships and
                                            Trusts</label>
                                        <input type="number" class="form-control" id="partnership-income" min="0"
                                            step="0.01">
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary"
                                        onclick="goToNextTab('income-tab', 'personal-tab')"><i
                                            class="fas fa-arrow-left me-2"></i> Previous: Personal</button>
                                    <button type="button" class="btn btn-primary"
                                        onclick="goToNextTab('income-tab', 'deductions-tab')">Next: Deductions <i
                                            class="fas fa-arrow-right ms-2"></i></button>
                                </div>
                            </div>

                            <!-- Deductions Tab -->
                            <div class="tab-pane fade" id="deductions-content" role="tabpanel">
                                <h4 class="mb-3">Work-Related Expenses</h4>

                                <!-- Car Expenses -->
                                <div class="card mb-3">
                                    <div class="card-header bg-light">
                                        <h5 class="mb-0">Car Expenses (D1)</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row g-3">
                                            <div class="col-md-12">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        id="use-car-for-work">
                                                    <label class="form-check-label" for="use-car-for-work">
                                                        I use my car for work purposes
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="car-expense-details" class="row g-3 mt-2" style="display: none;">
                                            <div class="col-md-4">
                                                <label for="car-make" class="form-label">Car Make and Model</label>
                                                <input type="text" class="form-control" id="car-make">
                                            </div>
                                            <div class="col-md-4">
                                                <label for="car-registration" class="form-label">Registration
                                                    Number</label>
                                                <input type="text" class="form-control" id="car-registration">
                                            </div>
                                            <div class="col-md-4">
                                                <label for="car-method" class="form-label">Calculation Method</label>
                                                <select class="form-select" id="car-method">
                                                    <option value="cents">Cents per Kilometer</option>
                                                    <option value="logbook">Logbook Method</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label for="business-km" class="form-label">Business Kilometers</label>
                                                <input type="number" class="form-control" id="business-km" min="0">
                                            </div>
                                            <div class="col-md-8">
                                                <label for="car-expenses" class="form-label">Total Car Expenses
                                                    Claimed</label>
                                                <input type="number" class="form-control" id="car-expenses" min="0"
                                                    step="0.01">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Other key deduction sections would go here -->
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i> Additional deduction sections will include
                                    travel expenses, clothing expenses, self-education, and other work-related expenses.
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary"
                                        onclick="goToNextTab('deductions-tab', 'income-tab')"><i
                                            class="fas fa-arrow-left me-2"></i> Previous: Income</button>
                                    <button type="button" class="btn btn-primary"
                                        onclick="goToNextTab('deductions-tab', 'offsets-tab')">Next: Tax Offsets <i
                                            class="fas fa-arrow-right ms-2"></i></button>
                                </div>
                            </div>

                            <!-- Placeholder for remaining tabs -->
                            <div class="tab-pane fade" id="offsets-content" role="tabpanel">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i> This section will contain tax offset fields
                                    including private health insurance details, spouse details for offsets, and other
                                    tax offset information.
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary"
                                        onclick="goToNextTab('offsets-tab', 'deductions-tab')"><i
                                            class="fas fa-arrow-left me-2"></i> Previous: Deductions</button>
                                    <button type="button" class="btn btn-primary"
                                        onclick="goToNextTab('offsets-tab', 'medicare-tab')">Next: Medicare <i
                                            class="fas fa-arrow-right ms-2"></i></button>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="medicare-content" role="tabpanel">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i> This section will contain Medicare levy
                                    information and private health insurance details.
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary"
                                        onclick="goToNextTab('medicare-tab', 'offsets-tab')"><i
                                            class="fas fa-arrow-left me-2"></i> Previous: Tax Offsets</button>
                                    <button type="button" class="btn btn-primary"
                                        onclick="goToNextTab('medicare-tab', 'hecs-tab')">Next: HELP/HECS <i
                                            class="fas fa-arrow-right ms-2"></i></button>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="hecs-content" role="tabpanel">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i> This section will contain HELP/HECS debt
                                    information and student loan details.
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary"
                                        onclick="goToNextTab('hecs-tab', 'medicare-tab')"><i
                                            class="fas fa-arrow-left me-2"></i> Previous: Medicare</button>
                                    <button type="button" class="btn btn-primary"
                                        onclick="goToNextTab('hecs-tab', 'additional-tab')">Next: Additional Info <i
                                            class="fas fa-arrow-right ms-2"></i></button>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="additional-content" role="tabpanel">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i> This section will contain additional tax
                                    information such as foreign entities, family trust details, and other special
                                    circumstances.
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary"
                                        onclick="goToNextTab('additional-tab', 'hecs-tab')"><i
                                            class="fas fa-arrow-left me-2"></i> Previous: HELP/HECS</button>
                                    <button type="button" class="btn btn-primary" id="save-tax-profile">
                                        <i class="fas fa-save me-2"></i> Save Tax Profile
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>