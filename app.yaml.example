# DigitalOcean App Platform Configuration Template
# Copy this file to app.yaml and update with your actual values
# NEVER commit app.yaml with real credentials to version control

name: taaxdog-production
region: syd
services:
  - name: web
    build_command: npm run build:production
    run_command: npm start
    environment_slug: node-js
    http_port: 3000
    instance_count: 1
    instance_size_slug: professional-xs
    source_dir: /
    envs:
      # Application Settings
      - key: NODE_ENV
        value: production
      - key: NEXTAUTH_URL
        value: https://taxreturnpro.com.au
      
      # Secrets (use DigitalOcean's encrypted environment variables)
      - key: NEXTAUTH_SECRET
        value: ${NEXTAUTH_SECRET}
        type: SECRET
      
      # Database (use environment variables or connection pooling)
      - key: DATABASE_URL
        value: ${DATABASE_URL}
        type: SECRET
      
      # Stripe Keys (use environment variables)
      - key: STRIPE_PUBLISHABLE_KEY
        value: ${STRIPE_PUBLISHABLE_KEY}
        type: SECRET
      - key: STRIPE_SECRET_KEY
        value: ${STRIPE_SECRET_KEY}
        type: SECRET
      - key: STRIPE_WEBHOOK_SECRET
        value: ${STRIPE_WEBHOOK_SECRET}
        type: SECRET
      
      # AI Provider Keys (use environment variables)
      - key: ANTHROPIC_API_KEY
        value: ${ANTHROPIC_API_KEY}
        type: SECRET
      - key: OPENROUTER_API_KEY
        value: ${OPENROUTER_API_KEY}
        type: SECRET
      - key: GEMINI_API_KEY
        value: ${GEMINI_API_KEY}
        type: SECRET
      
      # Banking Integration
      - key: BASIQ_API_KEY
        value: ${BASIQ_API_KEY}
        type: SECRET